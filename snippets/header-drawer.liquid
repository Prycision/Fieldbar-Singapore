{% comment %}
  Renders a header drawer menu for mobile and desktop.

  Usage:
  {% render 'header-drawer' %}
{% endcomment %}

<header-drawer data-breakpoint="{% if section.settings.menu_type_desktop == 'drawer' %}desktop{% else %}tablet{% endif %}">
  <details id="Details-menu-drawer-container" class="menu-drawer-container">
    <summary class="header__icon header__icon--menu header__icon--summary link focus-inset" aria-label="{{ 'sections.header.menu' | t }}">
      <span>
        {{- 'icon-hamburger.svg' | inline_asset_content -}}
        {{- 'icon-close.svg' | inline_asset_content -}}
      </span>
    </summary>
    <div id="menu-drawer" class="gradient menu-drawer motion-reduce color-{{ section.settings.menu_color_scheme }}">
      <div class="menu-drawer__inner-container">
        <div class="menu-drawer__navigation-container">
          <nav class="menu-drawer__navigation">
            {% assign country_code = localization.country.iso_code | default: 'GB' | upcase %}
            <ul class="menu-drawer__menu has-submenu list-menu" role="list">
              {% for link in section.settings.menu.links %}
                <li data-index="{{ forloop.index0 }}">
                  {% if link.links != blank %}
                    <details id="Drawer-mega-menu-{{ forloop.index }}" class="mega-menu">
                      <summary class="menu-drawer__menu-item list-menu__item link link--text focus-inset">
                        {{ link.title | escape }}
                        <span class="svg-wrapper">
                          {{ 'icon-caret.svg' | inline_asset_content }}
                        </span>
                      </summary>

                      {% comment %} Market-based submenu + snippet logic {% endcomment %}
                      {% case country_code %}
                        {% when 'GB' %}
                          {% case forloop.index0 %}
                            {% when 0 %}
                              {% assign sub_menus = 'mega1uk,mega2uk,mega3uk' | split: ',' %}
                              {% assign image_snippet = 'mega-grid-mobile' %}
                            {% when 1 %}
                              {% assign sub_menus = 'mega_about_uk' | split: ',' %}
                              {% assign image_snippet = 'mega-grid2-mobile' %}
                            {% when 2 %}
                              {% assign sub_menus = 'mega_product_guide_uk' | split: ',' %}
                              {% assign image_snippet = 'mega-grid3-mobile' %}
                            {% else %}
                              {% assign sub_menus = '' | split: ',' %}
                              {% assign image_snippet = '' %}
                          {% endcase %}
                        {% when 'AU' or 'US' %}
                          {% case forloop.index0 %}
                            {% when 0 %}
                              {% assign sub_menus = 'mega1_other_nogt,mega2uk,mega3uk' | split: ',' %}
                              {% assign image_snippet = 'mega-grid-mobile' %}
                            {% when 1 %}
                              {% assign sub_menus = 'mega_about_uk' | split: ',' %}
                              {% assign image_snippet = 'mega-grid2-mobile' %}
                            {% when 2 %}
                              {% assign sub_menus = 'mega_product_guide_excl' | split: ',' %}
                              {% assign image_snippet = 'mega-grid3-mobile' %}
                            {% else %}
                              {% assign sub_menus = '' | split: ',' %}
                              {% assign image_snippet = '' %}
                          {% endcase %}
                        {% else %}
                          {% case forloop.index0 %}
                            {% when 0 %}
                              {% assign sub_menus = 'mega1_other,mega2_other,mega3_other' | split: ',' %}
                              {% assign image_snippet = 'mega-grid-mobile' %}
                            {% when 1 %}
                              {% assign sub_menus = 'mega_about_other' | split: ',' %}
                              {% assign image_snippet = 'mega-grid2-mobile' %}
                            {% when 2 %}
                              {% assign sub_menus = 'mega_product_guide_other' | split: ',' %}
                              {% assign image_snippet = 'mega-grid3-mobile' %}
                            {% else %}
                              {% assign sub_menus = '' | split: ',' %}
                              {% assign image_snippet = '' %}
                          {% endcase %}
                      {% endcase %}

                      <div class="menu-drawer__submenu has-submenu gradient motion-reduce">
                        <div class="menu-drawer__inner-submenu">
                          <button class="menu-drawer__close-button link link--text focus-inset" aria-expanded="true">
                            <span class="svg-wrapper">
                              {{ 'icon-arrow.svg' | inline_asset_content }}
                            </span>
                            {{ link.title | escape }}
                          </button>

                          <ul class="menu-drawer__menu list-menu" role="list">
                            {% for menu_handle in sub_menus %}
                              {% assign menu = linklists[menu_handle] %}
                              {% if menu.links.size > 0 %}
                                {% for item in menu.links %}
                                  <li>
                                    <a
                                      href="{{ item.url }}"
                                      class="menu-drawer__menu-item link link--text list-menu__item focus-inset{% if item.current %} menu-drawer__menu-item--active{% endif %}"
                                      {% if item.current %}
                                        aria-current="page"
                                      {% endif %}>
                                      {{ item.title | escape }}
                                    </a>
                                  </li>
                                {% endfor %}
                              {% endif %}
                            {% endfor %}

                            {% if image_snippet != '' %}
                              <div class="mega-menu__image-container-mobile">
                                {% render image_snippet %}
                              </div>
                            {% endif %}
                          </ul>
                        </div>
                      </div>
                    </details>
                  {% else %}
                    <a
                      href="{{ link.url }}"
                      class="menu-drawer__menu-item list-menu__item link link--text focus-inset{% if link.current %} menu-drawer__menu-item--active{% endif %}"
                      {% if link.current %}
                        aria-current="page"
                      {% endif %}>
                      {{ link.title | escape }}
                    </a>
                  {% endif %}
                </li>
              {% endfor %}
            </ul>
          </nav>
          {% comment %}

            <div class="menu-drawer__utility-links">

            {%- if shop.customer_accounts_enabled -%}
            <a
            href="{%- if customer -%}{{ routes.account_url }}{%- else -%}{{ routes.account_login_url }}{%- endif -%}"
            class="menu-drawer__account link focus-inset h5 medium-hide large-up-hide"
            rel="nofollow"
            >
            {%- if section.settings.enable_customer_avatar -%}
            <account-icon>
            {%- if customer and customer.has_avatar? -%}
            {{ customer | avatar }}
            {%- else -%}
            <span class="svg-wrapper">
            {{- 'LogoF.svg' | inline_asset_content -}}
            </span>
            {%- endif -%}
            </account-icon>
            {%- else -%}
            <span class="svg-wrapper">
            {{- 'LogoF.svg' | inline_asset_content -}}
            </span>
            {%- endif -%}
            {%- liquid
            if customer
            echo 'customer.account_fallback' | t
            else
            echo 'customer.log_in' | t
            endif
            -%}
            </a>
            {%- endif -%}
          {% endcomment %}
          {% comment %}
            {%- if localization.available_countries or localization.available_languages -%}
            <div class="menu-drawer__localization header-localization">
            {%- if localization.available_countries and localization.available_countries.size > 1 -%}
            <localization-form>
            {%- form 'localization'
            , id: 'HeaderCountryMobileForm'
            , class: 'localization-form' -%}
            <div>
            <h2 class="visually-hidden" id="HeaderCountryMobileLabel">
            {{ 'localization.country_label' | t }}
            </h2>
            {%- render 'country-localization'
            , localPosition: 'HeaderCountryMobile' -%}
            </div>
            {%- endform -%}
            </localization-form>
            {% endif %}

            {%- if localization.available_languages and localization.available_languages.size > 1 -%}
            <localization-form>
            {%- form 'localization'
            , id: 'HeaderLanguageMobileForm'
            , class: 'localization-form' -%}
            <div>
            <h2 class="visually-hidden" id="HeaderLanguageMobileLabel">
            {{ 'localization.language_label' | t }}
            </h2>
            {%- render 'language-localization'
            , localPosition: 'HeaderLanguageMobile' -%}
            </div>
            {%- endform -%}
            </localization-form>
            {%- endif -%}
            </div>
            {%- endif -%}
            <ul class="list list-social list-unstyled" role="list">
            {%- if settings.social_twitter_link != blank -%}
            <li class="list-social__item">
            <a href="{{ settings.social_twitter_link }}" class="list-social__link link">
            <span class="svg-wrapper">
            {{- 'icon-twitter.svg' | inline_asset_content -}}
            </span>
            <span class="visually-hidden">
            {{ 'general.social.links.twitter' | t }}
            </span>
            </a>
            </li>
            {%- endif -%}
            {%- if settings.social_facebook_link != blank -%}
            <li class="list-social__item">
            <a href="{{ settings.social_facebook_link }}" class="list-social__link link">
            <span class="svg-wrapper">
            {{- 'icon-facebook.svg' | inline_asset_content -}}
            </span>
            <span class="visually-hidden">
            {{ 'general.social.links.facebook' | t }}
            </span>
            </a>
            </li>
            {%- endif -%}
            {%- if settings.social_pinterest_link != blank -%}
            <li class="list-social__item">
            <a href="{{ settings.social_pinterest_link }}" class="list-social__link link">
            <span class="svg-wrapper">
            {{- 'icon-pinterest.svg' | inline_asset_content -}}
            </span>
            <span class="visually-hidden">
            {{ 'general.social.links.pinterest' | t }}
            </span>
            </a>
            </li>
            {%- endif -%}
            {%- if settings.social_instagram_link != blank -%}
            <li class="list-social__item">
            <a href="{{ settings.social_instagram_link }}" class="list-social__link link">
            <span class="svg-wrapper">
            {{- 'icon-instagram.svg' | inline_asset_content -}}
            </span>
            <span class="visually-hidden">
            {{ 'general.social.links.instagram' | t }}
            </span>
            </a>
            </li>
            {%- endif -%}
            {%- if settings.social_tiktok_link != blank -%}
            <li class="list-social__item">
            <a href="{{ settings.social_tiktok_link }}" class="list-social__link link">
            <span class="svg-wrapper">
            {{- 'icon-tiktok.svg' | inline_asset_content -}}
            </span>
            <span class="visually-hidden">
            {{ 'general.social.links.tiktok' | t }}
            </span>
            </a>
            </li>
            {%- endif -%}
            {%- if settings.social_tumblr_link != blank -%}
            <li class="list-social__item">
            <a href="{{ settings.social_tumblr_link }}" class="list-social__link link">
            <span class="svg-wrapper">
            {{- 'linkedin.svg' | inline_asset_content -}}
            </span>
            <span class="visually-hidden">
            {{ 'general.social.links.tumblr' | t }}
            </span>
            </a>
            </li>
            {%- endif -%}
            {%- if settings.social_snapchat_link != blank -%}
            <li class="list-social__item">
            <a href="{{ settings.social_snapchat_link }}" class="list-social__link link">
            <span class="svg-wrapper">
            {{- 'icon-snapchat.svg' | inline_asset_content -}}
            </span>
            <span class="visually-hidden">
            {{ 'general.social.links.snapchat' | t }}
            </span>
            </a>
            </li>
            {%- endif -%}
            {%- if settings.social_youtube_link != blank -%}
            <li class="list-social__item">
            <a href="{{ settings.social_youtube_link }}" class="list-social__link link">
            <span class="svg-wrapper">
            {{- 'icon-youtube.svg' | inline_asset_content -}}
            </span>
            <span class="visually-hidden">
            {{ 'general.social.links.youtube' | t }}
            </span>
            </a>
            </li>
            {%- endif -%}
            {%- if settings.social_vimeo_link != blank -%}
            <li class="list-social__item">
            <a href="{{ settings.social_vimeo_link }}" class="list-social__link link">
            <span class="svg-wrapper">
            {{- 'icon-vimeo.svg' | inline_asset_content -}}
            </span>
            <span class="visually-hidden">
            {{ 'general.social.links.vimeo' | t }}
            </span>
            </a>
            </li>
            {%- endif -%}
            </ul>
          {% endcomment %}
          <selector-root data-id="SV675713" id="SV675713"></selector-root>
        </div>
      </div>
    </div>
  </details>
</header-drawer>

<style>
  .product-item-mob {
    background-image: url('/cdn/shop/files/Studio_Background.webp?v=1746699057');
    background-repeat: no-repeat;
    background-size: cover;
    width: 50%;
    max-height: 20vh;
    display: flex;
    align-items: center;
    justify-content: center;
    align-content: center;
  }
  .product-item-mob2 {
    background-repeat: no-repeat;
    background-size: cover;
    width: 50%;
    max-height: 20vh;
    display: flex;
    align-items: center;
    justify-content: center;
    align-content: center;
  }
  .mega-products-grid-mob {
    display: flex;
    margin-left: 1em;
    margin-right: 1em;
    max-width: 100%;
    overflow: hidden;
    column-gap: 1em;
    flex: auto;
  }

  .gimg {
    max-width: 100% !important;
    height: 30vh;
    object-fit: cover;
  }
</style>
