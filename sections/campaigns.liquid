{% schema %}
{
  "name": "Past Campaigns",
  "tag": "section",
  "class": "past-campaigns-section",
  "settings": [],
  "blocks": [
    {
      "type": "slide",
      "name": "Campaign Slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "slide_image",
          "label": "Background Image"
        },
        {
          "type": "text",
          "id": "slide_title",
          "label": "Slide Title"
        },
        {
          "type": "richtext",
          "id": "slide_text",
          "label": "Slide Text"
        },
        {
          "type": "text",
          "id": "slide_button_text",
          "label": "Slide Button Text"
        },
        {
          "type": "url",
          "id": "slide_button_url",
          "label": "Slide Button URL"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "Text Color",
          "default": "#ffffff"
        }
      ]
    }
  ],
  "max_blocks": 20,
  "presets": [
    {
      "name": "Past Campaigns",
      "blocks": [
        { "type": "slide" },
        { "type": "slide" }
      ]
    }
  ]
}
{% endschema %}

<style>
.past-campaigns-section {
  height: 100vh;
  overflow-y: scroll;
  scroll-snap-type: y mandatory;
  scroll-behavior: smooth;
  scroll-padding-top: 0;
}

.past-campaigns-section .past-campaigns-section__slides {
  height: auto;
}

.past-campaigns-section .past-campaigns-section__slide {
  position: relative;
  height: 100vh;
  width: 100vw;
  background-size: cover;
  background-position: center;
  scroll-snap-align: start;
  scroll-snap-stop: always;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  margin: 1.1em 0;
}

/* Number Badge */
.past-campaigns-section .past-campaigns-section__slide-number {
  position: absolute;
  top: 1rem;
  right: 1.5rem;
  font-size: 1em;
  font-family: 'Gotham Narrow Book', sans-serif;
  font-weight: 500;
  color: #ffffff;
  z-index: 2;
  opacity: 0.8;
}

.past-campaigns-section .past-campaigns-section__overlay {
  padding: 2rem;
  max-width: 800px;
  text-align: center;
  background: none;
  z-index: 1;
}

.past-campaigns-section .past-campaigns-section__overlay h2 {
  margin: 0 0 1rem;
}

.past-campaigns-section .past-campaigns-section__overlay .rte {
  margin-bottom: 1.5rem;
}

.past-campaigns-section .past-campaigns-section__overlay a.btn {
  display: inline-block;
  padding: .5em 2em;
  background: #002B4D;
  color: #fff;
  text-decoration: none;
  text-transform: uppercase;
  transition: background .3s ease;
  font-size: 0.9em;
}

.past-campaigns-section .past-campaigns-section__overlay a.btn:hover {
  background: #FF8A3D;
}

.past-campaigns-section::-webkit-scrollbar { width: 0; }
.past-campaigns-section { -ms-overflow-style: none; scrollbar-width: none; }

@media screen and (max-width: 768px) {
  .past-campaigns-section .past-campaigns-section__overlay {
    padding: 1.5rem;
  }

  .past-campaigns-section .past-campaigns-section__slide-number {
    font-size: 1rem;
    right: 1rem;
  }
}
</style>

<div class="past-campaigns-section">
  <div class="past-campaigns-section__slides">
    {% for block in section.blocks %}
      <div class="past-campaigns-section__slide"
           style="{% if block.settings.slide_image %}background-image: url({{ block.settings.slide_image | img_url: '2048x' }});{% endif %}">
        <div class="past-campaigns-section__slide-number">
          {% assign num = forloop.index %}
          {% if num < 10 %}0{% endif %}{{ num }}.
        </div>
        <div class="past-campaigns-section__overlay">
          {% if block.settings.slide_title %}
            <h2 style="color: {{ block.settings.text_color }};">{{ block.settings.slide_title }}</h2>
          {% endif %}
          {% if block.settings.slide_text %}
            <div class="rte" style="color: {{ block.settings.text_color }};">{{ block.settings.slide_text }}</div>
          {% endif %}
          {% if block.settings.slide_button_text != blank and block.settings.slide_button_url != blank %}
            <a href="{{ block.settings.slide_button_url }}" class="btn">
              {{ block.settings.slide_button_text }}
            </a>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>
</div>
